{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Імпорт необхідних бібліотек\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  // Отримання посилань на елементи DOM\n  const form = document.querySelector(\".searchForm\");\n  const searchInput = document.querySelector(\".searchInput\");\n  const loader = document.querySelector(\".loader\");\n  const gallery = document.querySelector(\".gallery\");\n  const loadButton = document.querySelector(\".load-more-button\");\n\n  // Ключ та URL API Pixabay\n  const apiKey = \"42055816-5ec499474650eadfc6b07a02f\";\n  const apiUrl = \"https://pixabay.com/api/\";\n\n  // Ініціалізація Lightbox\n  const lightbox = new SimpleLightbox(\".gallery a\");\n\n  // Змінні для пагінації\n  let currentPage = 1;\n  const perPage = 15; // Змінено кількість елементів на сторінці\n\n  // Додавання слухача подій для форми пошуку\n  form.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const searchTerm = searchInput.value.trim();\n\n    if (searchTerm === \"\") {\n      // Вивід повідомлення про помилку, якщо поле пошуку порожнє\n      iziToast.error({\n        title: \"Error\",\n        position: \"topRight\",\n        message: \"Please enter a search term.\",\n      });\n      return;\n    }\n\n    loader.classList.remove(\"hidden\");\n    gallery.innerHTML = \"\";\n    loadButton.classList.add(\"hidden\");\n\n    try {\n      // Запит до API Pixabay для отримання зображень з пагінацією\n      const response = await axios.get(`${apiUrl}?key=${apiKey}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`);\n\n      if (response.status !== 200) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      const data = response.data;\n\n      if (data.hits.length === 0) {\n        // Вивід повідомлення, якщо немає результатів\n        iziToast.warning({\n          title: \"No Results\",\n          position: \"topRight\",\n          message: \"Sorry, there are no images matching your search query. Please try again!\",\n        });\n      } else {\n        // Формування масиву об'єктів із зображеннями та їх відображення\n        const images = data.hits.map((hit) => ({\n          webformatURL: hit.webformatURL,\n          largeImageURL: hit.largeImageURL,\n          tags: hit.tags,\n          likes: hit.likes,\n          views: hit.views,\n          comments: hit.comments,\n          downloads: hit.downloads,\n        }));\n\n        displayImages(images);\n\n        // Перевірка, чи є ще зображення для завантаження\n        if (data.totalHits > currentPage * perPage) {\n          loadButton.classList.remove(\"hidden\");\n        } else {\n          loadButton.classList.add(\"hidden\");\n        }\n\n        currentPage++;\n      }\n    } catch (error) {\n      // Вивід повідомлення про помилку\n      console.error(\"Error fetching data:\", error);\n      iziToast.error({\n        title: \"Error\",\n        position: \"topRight\",\n        message: \"An error occurred while fetching data. Please try again.\",\n      });\n    } finally {\n      // Приховання індикатора завантаження після завершення запиту\n      loader.classList.add(\"hidden\");\n    }\n  });\n\n  // Додавання слухача подій для кнопки \"Load more\"\n  loadButton.addEventListener(\"click\", () => {\n    loader.classList.remove(\"hidden\");\n    loadButton.classList.add(\"hidden\");\n\n    fetchData();\n  });\n\n  // Функція для отримання додаткових зображень\n  async function fetchData() {\n    try {\n      const response = await axios.get(`${apiUrl}?key=${apiKey}&q=${searchInput.value.trim()}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`);\n\n      if (response.status !== 200) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      const data = response.data;\n\n      if (data.hits.length === 0) {\n        // Приховання кнопки, якщо досягнуто кінець колекції\n        loadButton.classList.add(\"hidden\");\n        iziToast.info({\n          title: \"End of Collection\",\n          position: \"topRight\",\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        // Формування масиву об'єктів із зображеннями та їх відображення\n        const images = data.hits.map((hit) => ({\n          webformatURL: hit.webformatURL,\n          largeImageURL: hit.largeImageURL,\n          tags: hit.tags,\n          likes: hit.likes,\n          views: hit.views,\n          comments: hit.comments,\n          downloads: hit.downloads,\n        }));\n\n        displayImages(images);\n\n        // Перевірка, чи є ще зображення для завантаження\n        if (data.totalHits > currentPage * perPage) {\n          loadButton.classList.remove(\"hidden\");\n        } else {\n          loadButton.classList.add(\"hidden\");\n        }\n      }\n    } catch (error) {\n      // Вивід повідомлення про помилку\n      console.error(\"Error fetching data:\", error);\n      iziToast.error({\n        title: \"Error\",\n        position: \"topRight\",\n        message: \"An error occurred while fetching data. Please try again.\",\n      });\n    } finally {\n      // Приховання індикатора завантаження після завершення запиту\n      loader.classList.add(\"hidden\");\n    }\n  }\n\n  // Функція для відображення зображень у галереї\n  function displayImages(images) {\n    const galleryHTML = images\n      .map(\n        (image) => `\n          <div class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${image.tags}\">\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"image-thumbnail\">\n            </a>\n            <div class=\"image-details\">\n              <p><b>Likes:</b> <span class=\"result-likes\">${image.likes}</span></p>\n              <p><b>Views:</b> <span class=\"result-views\">${image.views}</span></p>\n              <p><b>Comments:</b> <span class=\"result-comments\">${image.comments}</span></p>\n              <p><b>Downloads:</b> <span class=\"result-downloads\">${image.downloads}</span></p>\n            </div>\n          </div>\n        `\n      )\n      .join(\"\");\n\n    gallery.innerHTML += galleryHTML;\n\n    lightbox.refresh();\n\n    // Плавне прокручування після завантаження нових зображень\n    const cardHeight = document.querySelector('.gallery-item')?.getBoundingClientRect().height;\n    if (cardHeight) {\n      smoothScrollBy(cardHeight * images.length, 300);\n    }\n  }\n\n  // Функція для плавного прокручування сторінки\n  function smoothScrollBy(distance, duration) {\n    const initialY = window.scrollY;\n    const targetY = initialY + distance;\n\n    let startTime = null;\n\n    function scrollAnimation(currentTime) {\n      if (!startTime) {\n        startTime = currentTime;\n      }\n\n      const progress = currentTime - startTime;\n      const elapsedTime = Math.min(progress, duration);\n\n      const easeInOutQuad = (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n\n      window.scrollTo(0, initialY + easeInOutQuad(elapsedTime / duration) * distance);\n\n      if (progress < duration) {\n        requestAnimationFrame(scrollAnimation);\n      }\n    }\n\n    requestAnimationFrame(scrollAnimation);\n  }\n});\n"],"names":["form","searchInput","loader","gallery","loadButton","apiKey","apiUrl","lightbox","SimpleLightbox","currentPage","perPage","event","searchTerm","iziToast","response","axios","data","images","hit","displayImages","error","fetchData","galleryHTML","image","cardHeight","_a","smoothScrollBy","distance","duration","initialY","startTime","scrollAnimation","currentTime","progress","elapsedTime","easeInOutQuad","t"],"mappings":"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"}